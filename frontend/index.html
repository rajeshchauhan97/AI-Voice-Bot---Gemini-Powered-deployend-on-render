```html
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Personal Voice Bot ‚Äî Demo</title>
<meta name="description" content="A user-friendly voice bot demo that answers common personal questions. Works with or without a server-side AI key (client-side fallback included)." />
<style>
  :root{
    --bg1:#071026; --bg2:#0f2436;
    --card: rgba(255,255,255,0.03);
    --accent:#06b6d4; --accent-2:#00e0ff;
    --muted:#95b6c1; --radius:14px;
    --maxw:640px;
  }
  *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial}
  html,body{height:100%;margin:0}
  body{
    display:flex;align-items:center;justify-content:center;
    background:linear-gradient(135deg,var(--bg1),var(--bg2));
    color:#e6f6f8;padding:20px;
  }
  .card{
    width:100%;max-width:var(--maxw);
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:var(--radius); padding:18px; box-shadow:0 10px 40px rgba(0,0,0,0.6);
    backdrop-filter: blur(6px); display:flex; flex-direction:column; gap:12px;
  }
  .header{display:flex;gap:12px;align-items:center}
  .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:800;color:#002a2a}
  h1{font-size:1.15rem;margin:0}
  p.subtitle{margin:0;color:var(--muted);font-size:0.92rem}
  .content{display:grid;grid-template-columns:1fr 320px;gap:14px}
  @media(max-width:880px){ .content{grid-template-columns:1fr} .right{order:2} }
  .chat{
    background:var(--card);padding:12px;border-radius:12px;height:420px;overflow:auto;border:1px solid rgba(255,255,255,0.02);
    display:flex;flex-direction:column;gap:10px;
  }
  .bubble{max-width:82%;padding:10px 12px;border-radius:12px;line-height:1.35;word-break:break-word}
  .bot{background:#082c36;color:#d8fbff;align-self:flex-start}
  .user{background:linear-gradient(90deg,var(--accent),#0891b2);color:#002;align-self:flex-end;font-weight:600}
  .meta{font-size:0.82rem;color:var(--muted);text-align:center;margin-top:6px}
  .right{display:flex;flex-direction:column;gap:10px}
  .chips{display:flex;flex-wrap:wrap;gap:8px}
  .chip{border-radius:999px;padding:8px 10px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:var(--muted);cursor:pointer;font-size:0.9rem}
  .controls{display:flex;gap:8px;align-items:center}
  input#q{flex:1;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:inherit;outline:none}
  button{padding:10px 12px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
  button#send{background:var(--accent);color:#002}
  button#mic{background:#22c55e;color:#002}
  .small{text-align:center;color:var(--muted);font-size:0.85rem}
  .source{font-size:0.78rem;color:var(--muted);text-align:right}
  /* scrollbar */
  .chat::-webkit-scrollbar{width:8px}
  .chat::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.03);border-radius:6px}
</style>
</head>
<body>
  <main class="card" role="main" aria-label="Personal Voice Bot">
    <div class="header">
      <div class="logo">PV</div>
      <div>
        <h1>Personal Voice Bot</h1>
        <p class="subtitle">Ask about my life story, superpower, growth areas, misconceptions, or how I push my limits.</p>
      </div>
    </div>

    <div class="content">
      <section class="left">
        <div id="chat" class="chat" aria-live="polite" aria-atomic="false">
          <div class="bubble bot">üëã Hi ‚Äî try: ‚ÄúWhat‚Äôs your #1 superpower?‚Äù or ‚ÄúTell me about your life story.‚Äù</div>
        </div>
        <div class="meta" id="status">Responses: server AI (if available) ‚Üí otherwise built-in demo replies.</div>
      </section>

      <aside class="right" aria-label="Controls">
        <div>
          <div style="font-weight:700;margin-bottom:8px">Try these</div>
          <div class="chips" id="chips">
            <button class="chip">What should we know about your life story in a few sentences?</button>
            <button class="chip">What‚Äôs your #1 superpower?</button>
            <button class="chip">What are the top 3 areas you‚Äôd like to grow in?</button>
            <button class="chip">What misconception do your coworkers have about you?</button>
            <button class="chip">How do you push your boundaries and limits?</button>
          </div>
        </div>

        <div style="margin-top:6px">
          <div style="font-weight:700;margin-bottom:8px">Ask now</div>
          <div class="controls">
            <input id="q" type="text" placeholder="Type your question or use the mic..." aria-label="Question input" />
            <button id="mic" title="Start/stop voice input">üé§</button>
            <button id="send" title="Send question">Send</button>
          </div>
        </div>

        <div class="small">
          No API key needed from users. Deployers may set server-side key to enable live AI.
        </div>
      </aside>
    </div>
  </main>

<script>
/* Production-ready single-file frontend:
   - Uses server /chat if available, otherwise uses client-side canned answers.
   - Speech recognition (browser) + TTS (speechSynthesis).
   - Intent detection covers the required example questions plus variations.
*/

/* ---------- canned responses (as "my" voice) ---------- */
const CANNED = {
  life: "I was trained on a broad range of text to help people learn, build, and write. I focus on clarity, friendly explanations, and practical next steps.",
  superpower: "My #1 superpower is turning complex ideas into clear, actionable explanations and examples ‚Äî I make things easier to understand and use.",
  growth: "Top three areas I'd like to grow in are: 1) maintaining longer-term context across multi-step projects, 2) staying current with the latest research and events, and 3) producing even more concise, actionable plans.",
  misconception: "A common misconception is that I always give final answers ‚Äî I'm most useful when we iterate together, ask follow-ups, and test ideas.",
  boundaries: "I push boundaries by trying new formats, running small experiments, asking better questions, and learning quickly from feedback and failures.",
  fallback: "I don't have a server-side AI key available. Please try rephrasing or ask a specific follow-up."
};

/* ---------- helper UI functions ---------- */
const chatEl = document.getElementById('chat');
const qEl = document.getElementById('q');
const sendBtn = document.getElementById('send');
const micBtn = document.getElementById('mic');
const chips = document.getElementById('chips');
const statusEl = document.getElementById('status');

function appendBubble(text, who='bot') {
  const d = document.createElement('div');
  d.className = 'bubble ' + (who === 'user' ? 'user' : 'bot');
  d.textContent = text;
  chatEl.appendChild(d);
  chatEl.scrollTop = chatEl.scrollHeight;
  return d;
}

/* ---------- intent detection ---------- */
function detectIntent(text){
  const t = text.toLowerCase();
  if (/(life story|about your life|who are you|tell me about your life|short bio|life in a)/.test(t)) return 'life';
  if (/(superpower|#1 superpower|top superpower|best skill|strength|what is your superpower)/.test(t)) return 'superpower';
  if (/(top 3|top three|areas you'd like to grow|growth areas|areas to grow|improve)/.test(t)) return 'growth';
  if (/(misconception|coworker|coworkers|misunderstand|people assume)/.test(t)) return 'misconception';
  if (/(push your boundaries|push your limits|push boundaries|how do you push|step out of your comfort)/.test(t)) return 'boundaries';
  return null;
}

/* ---------- TTS ---------- */
function speak(text){
  if (!('speechSynthesis' in window)) return;
  const u = new SpeechSynthesisUtterance(text);
  u.lang = 'en-US';
  u.rate = 1;
  window.speechSynthesis.cancel();
  window.speechSynthesis.speak(u);
}

/* ---------- server call with timeout ---------- */
async function callServer(text, timeout = 6000){
  const controller = new AbortController();
  const id = setTimeout(()=>controller.abort(), timeout);
  try{
    const res = await fetch('/chat', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({ text }),
      signal: controller.signal
    });
    clearTimeout(id);
    if (!res.ok) return null;
    const j = await res.json();
    // Accept multiple possible field names
    return j && (j.text || j.response || j.data || j.answer) ? (j.text || j.response || j.data || j.answer) : (j?.result || null);
  }catch(e){
    clearTimeout(id);
    return null;
  }
}

/* ---------- main ask flow ---------- */
async function ask(text){
  if(!text) return;
  appendBubble(text,'user');
  const tip = appendBubble('Thinking...','bot');
  // try server first
  const ai = await callServer(text);
  tip.remove();
  if (ai){
    appendBubble(ai,'bot');
    speak(ai);
    statusEl.textContent = 'Response: server AI';
    return;
  }
  // server not available or failed -> use intent -> canned
  const intent = detectIntent(text);
  if (intent && CANNED[intent]){
    appendBubble(CANNED[intent],'bot');
    speak(CANNED[intent]);
    statusEl.textContent = 'Response: demo fallback (client-side)';
    return;
  }
  // no intent -> generic canned fallback
  appendBubble(CANNED.fallback,'bot');
  speak(CANNED.fallback);
  statusEl.textContent = 'Response: demo fallback (client-side)';
}

/* ---------- events ---------- */
sendBtn.addEventListener('click', ()=> {
  const t = qEl.value.trim();
  if(!t) return;
  qEl.value='';
  ask(t);
});
qEl.addEventListener('keydown', e => { if (e.key === 'Enter') sendBtn.click(); });

chips.querySelectorAll('.chip').forEach(btn => {
  btn.addEventListener('click', ()=> {
    const txt = btn.textContent.trim();
    ask(txt);
  });
});

/* ---------- speech recognition ---------- */
let recognizing = false;
let recog;
if (window.SpeechRecognition || window.webkitSpeechRecognition){
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  recog = new SR();
  recog.lang = 'en-US';
  recog.interimResults = false;
  recog.maxAlternatives = 1;

  recog.onstart = ()=>{ recognizing=true; micBtn.textContent = '‚óè'; micBtn.style.background = '#ef4444'; micBtn.title = 'Recording... (click to stop)'; }
  recog.onend = ()=>{ recognizing=false; micBtn.textContent = 'üé§'; micBtn.style.background = ''; micBtn.title = 'Start voice input'; }
  recog.onerror = (e)=>{ appendBubble('üé§ Speech error: ' + (e.error || 'unknown'),'bot'); }
  recog.onresult = (ev)=> {
    const transcript = ev.results[0][0].transcript;
    qEl.value = transcript;
    ask(transcript);
  };
} else {
  micBtn.disabled = true;
  micBtn.title = 'Speech recognition not supported in this browser';
}

micBtn.addEventListener('click', ()=>{
  if (!recog) return;
  if (recognizing) recog.stop();
  else recog.start();
});

/* ---------- quick health check for server ---------- */
(async function(){
  // ping server /chat with a tiny test to see availability
  const ok = await callServer('ping', 2000);
  if (ok) statusEl.textContent = 'Server AI available (responses will use server if set)';
  else statusEl.textContent = 'No server AI detected ‚Äî demo replies will be used';
})();

/* ---------- accessibility: focus input ---------- */
qEl.focus();
</script>
</body>
</html>
```
